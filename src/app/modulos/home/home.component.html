<div class="container">
    <div class="row">
      <ng-container  *ngIf="usuario?.role != 'ADMIN'; else administracion">
        <div class="col-lg-4">
           <div class="card">
            <div class="card-header">
                <h5 class="card-header-text">{{ usuario?.role }}</h5>
             </div>
             <div class="card-block">
                <p>Nombre: {{ usuario?.displayName }}</p>
                <p>Telefono: {{ usuario?.telefono }}</p>
                <p>DNI: {{ usuario?.dni }}</p>
                <p>Email: {{ usuario?.email }}</p>
                <p>UID: {{ usuario?.uid }}</p>
             </div>
          </div>
        </div>
        
        <div class="col-lg-8">
            <div class="card">
               <div class="card-header">
                  <h5 class="card-header-text">Estadisticas</h5>
               </div>
               <p>Horas faltadas a las asignaturas: </p>
               <div class="card-block" *ngFor="let asignatura of usuario?.asignaturas; let i = index;">
                  <p>{{ asignatura}}: {{stadisticas[i]}} horas</p>
               </div>
            </div>
         </div>

         <div class="col-lg-12">
            <div class="card">
               <div class="card-header">
                  <h5 class="card-header-text">Asistencia</h5>
               </div>
               <p>Has faltado un total de: {{ totalFaltas }} horas</p>
               <div class="card-block" *ngFor="let falta of faltas">
                  <p>{{ falta.fecha }} || {{ falta.asignatura }} || {{ falta.profesor }}</p>
               </div>
            </div>
         </div>
      </ng-container>

      <!--ESTA ZONA ES PARA EL USUARIO ADMIN-->

      <ng-template #administracion>

         <div class="col-md-4 mx-auto mt-5">
            <div class="card">
             <div class="card-header">
                 <h5 class="card-header-text">{{ usuario?.role }}</h5>
              </div>
              <div class="card-block">
                 <p>Nombre: {{ usuario?.displayName }}</p>
                 <p>Telefono: {{ usuario?.telefono }}</p>
                 <p>DNI: {{ usuario?.dni }}</p>
                 <p>Email: {{ usuario?.email }}</p>
                 <p>UID: {{ usuario?.uid }}</p>
              </div>
           </div>
         </div>

         <div class="col-lg-12">
            <div class="card">
               <div class="card-header">
                  <h5 class="card-header-text">Administracion</h5>
               </div>
               <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
                  <li [ngbNavItem]="1">
                    <a ngbNavLink>Alumnos</a>
                    <ng-template ngbNavContent>
                        <ng-container *ngFor="let x of usuarios">
                           <div *ngIf="x.role == 'Alumno'">
                              <p>{{ x.displayName }} || {{ x.dni }} || {{ x.telefono }}</p>
                              <button type="button" class="btn btn-primary" (click)="eliminarUsuario(x.uid)">Eliminar</button>
                           </div>
                        </ng-container>
                    </ng-template>
                  </li>
                  <li [ngbNavItem]="2">
                    <a ngbNavLink>Profesores</a>
                    <ng-template ngbNavContent>
                     <ng-container *ngFor="let x of usuarios">
                        <div *ngIf="x.role == 'Profesor'">
                           <p>{{ x.displayName }} || {{ x.dni }} || {{ x.telefono }}</p>
                           <button type="button" class="btn btn-primary" (click)="eliminarUsuario(x.uid)">Eliminar</button>
                        </div>
                     </ng-container>
                    </ng-template>
                  </li>
                  <li [ngbNavItem]="3">
                    <a ngbNavLink>Asignaturas</a>
                    <ng-template ngbNavContent>
                     <ng-container *ngFor="let a of cursos">
                        <h3>{{ a.id }} 
                           <button type="button" class="btn btn-primary btn-sm" (click)="eliminarClase(a.id)">Eliminar Curso</button>
                        </h3>
                        <div >
                           <ul class="list-group list-group-flush" *ngFor="let j of a.Asignaturas; let indice=index">
                              <li class="list-group-item">{{ j }}
                                 <button type="button" class="btn btn-primary btn-sm" (click)="eliminarAsignatura(a, indice)">Eliminar Asignatura</button>
                              </li>
                            </ul>
                        </div>
                     </ng-container>
                    </ng-template>
                  </li>
                  <li [ngbNavItem]="4">
                     <a ngbNavLink>Anyadir Clase/Curso</a>
                     <ng-template ngbNavContent>

                        <div>
                           <h4>Anyadir Asignatura</h4>
                           <label class="mr-4">Nombre del Curso: </label>
                           <input type="text" id="addCursoID" name="addCursoNombre">
                           <button type="button" class="btn btn-primary btn-sm" (click)="anyadirClase()">Add curso</button>
                        </div>
                        <div>
                           <h4>Anyadir Asignatura</h4>
                        </div>
                     </ng-template>
                   </li>
                </ul>
                
                <div [ngbNavOutlet]="nav" class="mt-2"></div>
            </div>
         </div>

       </ng-template>
     </div>
</div>
